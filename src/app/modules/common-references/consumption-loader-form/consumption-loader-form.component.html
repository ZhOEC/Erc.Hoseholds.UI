<h2>Завнтаження споживання по точкам обліку</h2>
<div nz-row [nzGutter]="[0, 20]">
  <!--<div nz-col nzSpan="8">-->
  <div class="inner-box">
    <!-- <nz-upload
        ngModel="uploadFile"
        nzType="drag"
        [nzMultiple]="false"
        [nzBeforeUpload]="beforeUpload"
        nzAccept=".dbf,.xls,.xlsx"
      >
        <h3>Файл зі споживанням</h3>
        <p class="ant-upload-drag-icon">
          <i nz-icon nzType="inbox" *ngIf="!file; else elseBlock"></i>
          <ng-template #elseBlock>
            <svg-icon [src]="(file?.name?.split('.').pop() === 'xlsx' || file?.name?.split('.').pop() === 'xls') ? '/assets/xls.svg' : '/assets/dbf.svg'" 
              [svgStyle]="{ 'width.px':68, 'height.px':86 }"></svg-icon>
          </ng-template>
        </p>
        <span>
          {{ file?.name ? file.name : "Натисніть або перетягніть файл сюди" }}
        </span>
      </nz-upload> -->

    <nz-upload nzListType="picture-card" [(nzFileList)]="fileList" [nzBeforeUpload]="beforeUpload" [nzMultiple]="true"
      [nzShowUploadList]="{ showPreviewIcon: false, showRemoveIcon: true }" [nzRemove]="removeHandler"
      nzAccept=".xls,.xlsx">
      <i nz-icon nzType="plus"></i>
      <div class="ant-upload-text">Додати файл</div>
    </nz-upload>
  </div>
  <!--</div>-->
</div>
<div nz-row [nzGutter]="[0, 20]">
  <div nz-col nzSpan="8">
    <button nz-button nzType="primary" (click)=onSubmit() [nzLoading]="isSubmitLoading"
      [disabled]="isSubmitDisabled">Завантажити</button>
  </div>
</div>

<!-- <nz-space nzDirection="vertical">
  <nz-card nzTitle="Інформація по споживанню" style="width: 300px" nzSize="small">
    <span>Споживання Всього:</span>
  </nz-card>
</nz-space> -->
<br/>
<div nz-col nzSpan="24">
  
    <nz-table #problematicRecordsTable [nzData]="problematicDisplayRecords" [nzTitle]="titleTemplate" 
      nzBordered="true" nzShowSizeChanger>
      <ng-template #titleTemplate>
        <nz-row nzJustify="space-between" nzAlign="middle">
          <nz-col>
            <span>Список проблемних записів</span>
          </nz-col>
          <nz-col>
            <nz-space>
              <nz-space-item>
                <nz-input-group [nzSuffix]="suffixIconSearch">
                  <input type="text" nz-input placeholder="EIC або ОР" (input)="onSearchChange($event.target.value)" />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                  <i nz-icon nzType="search"></i>
                </ng-template>
              </nz-space-item>
            </nz-space>
          </nz-col>
        </nz-row>
      </ng-template>
      <thead>
        <tr rowspan="2">
          <th rowspan="2">Рядок</th>
          <th rowspan="2">EIC</th>
          <th rowspan="2">Особовий рахунок</th>
          <th colspan="3">Показники (T1)</th>
          <th colspan="3">Показники T2</th>
          <th colspan="3">Показники T3</th>
        </tr>
        <tr>
          <th>Попередні</th>
          <th>Поточні</th>
          <th>Різниця</th>

          <th>Попередні</th>
          <th>Поточні</th>
          <th>Різниця</th>

          <th>Попередні</th>
          <th>Поточні</th>
          <th>Різниця</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of problematicRecordsTable.data">
          <td>{{ r.row }}</td>
          <td>{{ r.eic }}</td>
          <td>{{ r.meterNumber }}</td>
          <td>{{ r.previousMeterReadingT1 }}</td>
          <td>{{ r.presentMeterReadingT1 }}</td>
          <td>{{ r.usageT1 }}</td>
          <td>{{ r.previousMeterReadingT2 }}</td>
          <td>{{ r.presentMeterReadingT2 }}</td>
          <td>{{ r.usageT2 }}</td>
          <td>{{ r.previousMeterReadingT3 }}</td>
          <td>{{ r.presentMeterReadingT3 }}</td>
          <td>{{ r.usageT3 }}</td>
        </tr>
      </tbody>
    </nz-table>
</div>